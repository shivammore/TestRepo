import React, {useState}  from "react";
import machineList from "./machineList.json";

function SelectMachine(){
    const [machineName, setMachineName] = useState("");
    const [machineType, setMachineType] = useState("");
    const [machineCount, setMachineCount] = useState("");

    const [id, setId] = useState("");
    const [message, setMessage] = useState("");

    function displayMessage(){
        machineList.forEach((machine)=> {
            if(machine.machineType == machineType){
                if(machineCountc> machine.availableMachines){
                    setId("failure");
                    setMessage(`Sorry only ${machine.availableMachines} are available`);
                }
                else{
                    setId("success");
                    setMessage(`${machineCount} machines approved for your team.`)
                } 
                machine.availableMachines=machine.availableMachines-machineCount

            }
            
        });
    }
}


return(
    <div>
    <header>Select Your Machine</header>
    {console.log(machineList)}
    <table>
    <thead>
    <th>Machine Type</th>
    <th>Processor</th>
    <th>Platform</th>
    <th>Primary Memory</th>
    </thead>

{machineList.map((machineCount){
    return(
        <tr key={machine.machineId}>
        <td id={'machineType${machine.machineId}'}>
            {machine.machineType}
        </td>
        <td id={'processor${machine.machineId}'}>{machine.processor}</td>
        <td id={'platform${machine.machineId}'}>{machine.platfrom}</td>
        <td id={'primaryMemory${machine.machineId}'}>
            {machine.primaryMmemory}
        </td>
        </tr>
    );
})}
</table>

</div>
<p>Give your team name, machine type and count</p>
    Team Name{" "}
    <input type="text" id="teamName" onchange={(e) => setMachineName(e.target.value)}></input>
    Machine Type{" "}
    <input type="text" id="machineType" onchange={(e)=>setMachine(e.target.value)}></input>
    Machine Count{""}
    <input type={number} id="machineCount" onchange={(e)=>setMachineCount(e.target.value)}></input>

<button id="submit" onClick={displayMessage}>
Submit
</button>
{
    id!=""?p id={id}>{message}</p>:""
}
</div>
</div>
);
}
export default SelectMachine;
